<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Huanger Films – Weekly Booking Calendar</title>
<style>
  body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
  h1 { text-align: center; }
  .week-selector { display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 20px; }
  .weekly-calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; }
  .day-column { background: #fff; padding: 10px; border-radius: 6px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
  .day-column h3 { font-size: 14px; text-align: center; margin-bottom: 10px; }
  .hour-box { padding: 8px; margin-bottom: 5px; border-radius: 4px; text-align: center; cursor: pointer; font-size: 13px; }
  button { padding: 8px 15px; cursor: pointer; border: none; background: #333; color: white; border-radius: 5px; }
</style>
</head>
<body>

<h1>Weekly Booking Calendar</h1>

<div class="week-selector">
  <button id="prevWeek">Previous Week</button>
  <span id="weekLabel"></span>
  <button id="nextWeek">Next Week</button>
</div>

<div id="weeklyCalendar" class="weekly-calendar-grid"></div>

<script>
// === Weekly Calendar Logic ===
const hours = Array.from({length: 14}, (_,i)=> i+7); // 7am–20 (8pm)
let currentMonday = getMonday(new Date());

function getMonday(d){ 
  d = new Date(d); 
  const day = d.getDay(); 
  const diff = d.getDate() - day + (day===0?-6:1); 
  return new Date(d.setDate(diff)); 
}
function format(date){ return date.toISOString().split('T')[0]; }

function renderWeek(){ 
  const weekLabel = document.getElementById('weekLabel'); 
  const grid = document.getElementById('weeklyCalendar'); 
  grid.innerHTML="";

  let end = new Date(currentMonday); 
  end.setDate(end.getDate()+6);
  weekLabel.textContent = `${currentMonday.toDateString()} – ${end.toDateString()}`;

  let days = [];
  for(let i=0;i<7;i++){ 
    let d = new Date(currentMonday); 
    d.setDate(d.getDate()+i); 
    days.push(d); 
  }

  days.forEach(day=>{
    const col = document.createElement('div'); 
    col.className='day-column';

    const h = document.createElement('h3'); 
    h.textContent = day.toDateString(); 
    col.appendChild(h);

    hours.forEach(hr=>{
      const box = document.createElement('div'); 
      box.className='hour-box';
      box.dataset.date = format(day);
      box.dataset.hour = hr;
      box.textContent = hr+":00";
      box.onclick = ()=>toggleBooking(box);
      col.appendChild(box);
    });

    grid.appendChild(col);
  });

  loadBookings();
}

function toggleBooking(box){ 
  const key = box.dataset.date+"_"+box.dataset.hour; 
  let booked = JSON.parse(localStorage.getItem('bookings')||"{}");

  if(booked[key]) delete booked[key]; 
  else booked[key] = true;

  localStorage.setItem('bookings', JSON.stringify(booked));
  updateColors();
}

function loadBookings(){ updateColors(); }

function updateColors(){ 
  let booked = JSON.parse(localStorage.getItem('bookings')||"{}");
  document.querySelectorAll('.hour-box').forEach(b=>{
    const key = b.dataset.date+"_"+b.dataset.hour;
    b.style.background = booked[key] ? '#ff6b6b' : '#8fdb8f';
  });
}

document.getElementById('prevWeek').onclick = ()=>{ 
  currentMonday.setDate(currentMonday.getDate()-7); 
  renderWeek(); 
};

document.getElementById('nextWeek').onclick = ()=>{ 
  currentMonday.setDate(currentMonday.getDate()+7); 
  renderWeek(); 
};

renderWeek();
</script>

</body>
</html>
